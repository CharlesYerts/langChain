/*
 * @Author: yeertesi
 * @Date: 2023-05-23 01:17:38
 * @LastEditTime: 2023-05-23 01:21:18
 * @LastEditors: yeertesi
 * @Description: 数据嵌入,将文本转换为向量（便于搜索）
 * @FilePath: /langChain/src/4.model/4.embedding.ts
 */
import { OpenAIEmbeddings } from "langchain/embeddings/openai";
import "dotenv/config";

// 1. 创建一个嵌入实例
const embeddings = new OpenAIEmbeddings({openAIApiKey: process.env.OPENAI_API_KEY});

// 2. 嵌入一个句子
const res = await embeddings.embedQuery("Hello world");
// 3. 嵌入多个句子（文档）
const documentRes = await embeddings.embedDocuments(["Hello world", "Bye bye"]);

console.log(res)
// [
//   -0.0047852774,  0.0048640342,   -0.01645707,  -0.024395779, -0.017263541,
//     0.012512918,  -0.019191515,   0.009053908,  -0.010213212, -0.026890801,
//     0.022883644,   0.010251015,  -0.023589306,  -0.006584088,  0.007989113,
//     0.002720268,   0.025088841,  -0.012153786,   0.012928754,  0.013054766,
//    -0.010395928, -0.0035566676,  0.0040008575,   0.008600268, -0.020678446,
//   -0.0019106456,   0.012178987,  -0.019241918,   0.030444318,  -0.03102397,
//    0.0035692686,  -0.007749692,   -0.00604854,   -0.01781799,  0.004860884,
//    -0.015612794,  0.0014097509,  -0.015637996,   0.019443536,  -0.01612944,
//    0.0072960514,   0.008316742,   0.011548932,  -0.013987249,  -0.03336778,
//     0.011341013,    0.00425603, -0.0126578305, -0.0013861238,  0.028302127,
//     0.025466874,  0.0007029065,  -0.016318457,   0.017427357, -0.016394064,
//     0.008499459,  -0.033241767,   0.031200387,    0.03238489,   -0.0212833,
//    0.0032416396,   0.005443686,  -0.007749692,  0.0060201874,  0.006281661,
//     0.016923312,   0.003528315,  0.0076740854,   -0.01881348,  0.026109532,
//     0.024660403,   0.005472039, -0.0016712243, -0.0048136297,  0.018397642,
//     0.003011669,  -0.011385117, -0.0020193304,   0.005138109, 0.0022335495,
//      0.03603922,  -0.027495656,  -0.008575066,   0.015436378,  0.018851284,
//    0.0018019609, -0.0034338066,    0.02094307,  -0.014503895, -0.024950229,
//     0.012632628,   0.013735226,  0.0069936244,   0.008575066, -0.015196957,
//   -0.0030541976,  -0.008745181,   0.016746895,  0.0040481114, -0.048010286,
//   ... 1436 more items
// ]

console.log(documentRes)
// [
//   [
//      -0.004845875,   0.004899438,  -0.016358767,  -0.024475135, -0.017341806,
//       0.012571548,  -0.019156644,   0.009036391,  -0.010227379, -0.026945334,
//       0.022861943,   0.010321903,  -0.023479493, -0.0066544134,  0.007977734,
//      0.0026371893,   0.025206111,  -0.012048521,   0.012943339,  0.013094575,
//      -0.010580265,  -0.003509951,   0.004070787,   0.008639394, -0.020631202,
//     -0.0019203906,   0.012161949,  -0.019194454,   0.030373365, -0.031028723,
//      0.0036170771,  -0.007813894, -0.0060778237,  -0.017820721, 0.0048647798,
//      -0.015640393,   0.001373733,  -0.015552171,   0.019534737, -0.016169721,
//       0.007316074,   0.008273906,   0.011418369,   -0.01390117, -0.033347685,
//       0.011248227,  0.0042503807,  -0.012792102, -0.0014595914,  0.028356876,
//       0.025407761, 0.00076445413,  -0.016308354,   0.017455231, -0.016396577,
//       0.008557475,   -0.03312083,   0.031104341,   0.032389853,  -0.02132437,
//       0.003324056,  0.0055610985, -0.0078012915,   0.006090427, 0.0062038545,
//         0.0169133,  0.0036391325,  0.0076815626,  -0.018841568,  0.026037913,
//       0.024550753,  0.0055264398, -0.0015824712, -0.0047765584,  0.018425668,
//      0.0030656934, -0.0113742575, -0.0020322427,   0.005069579, 0.0022701253,
//       0.036095154,  -0.027449455,  -0.008475555,   0.015388331,  0.018917186,
//      0.0018999106,  -0.003349262,   0.020895867,  -0.014480911, -0.025042271,
//       0.012546342,   0.013850759,  0.0069253794,   0.008588983, -0.015199285,
//     -0.0029585673,  -0.008759124,   0.016749462,   0.004111747,  -0.04804285,
//     ... 1436 more items
//   ],
//   [
//      -0.009500479,  -0.013167101,    0.013206386,  0.0057618343,
//       -0.03897095,  0.0078374045,   -0.026059205, -0.0113665275,
//      -0.002286728,  -0.016473608,     0.04182568,    0.01784859,
//      0.0056439787, -0.0049924986,    0.018058112,  -0.015373621,
//        0.03389006,   0.006148139,    0.023846136,  -0.016473608,
//     -0.0065540867,   0.016106946,  -0.0061841505, -0.0044097677,
//      -0.016552178,  -0.022012826, -0.00097312796,  -0.021646164,
//       0.011857593,   -0.02628182,    0.026229441,   0.012060567,
//       -0.02612468,  -0.018136684,   -0.013972448,  -0.024304464,
//      -0.019131908, -0.0050055934,    0.020729508, -0.0049663084,
//      0.0024831542,   0.020729508,    0.008125496,  -0.019694997,
//      -0.027866326,    0.01771764,     0.01519029,   0.004658574,
//     -0.0045210756,   0.024330655,    0.032371033,  0.0038532268,
//      -0.032423414,  -0.018935483,  -0.0018611379,    0.02354495,
//       -0.02184259,    0.01513791,   -0.015674809,  -0.010901652,
//       0.011739737,  -0.024513986,    -0.00522821,    0.02285091,
//      0.0012759516, -0.0049630348,   0.0019937255,  -0.003493112,
//      -0.031113906,  0.0055326703,   0.0028203523,   0.012027829,
//       0.008014188, -0.0076802634,    0.008197519,  0.0030085943,
//      -0.024160419,   0.006986224,   -0.015151005, -0.0069665816,
//      0.0064133145,  -0.029516306,   -0.036299556,     0.0367186,
//        0.03224008, -0.0021868781,   -0.014352205,   0.011222482,
//      -0.027159192,  -0.021580689,   0.0003359706,   0.022431869,
//     -0.0013880782,   0.015818855,   0.0040954854,   0.006246352,
//      -0.008053473,     0.0385781,    0.024710411,  -0.012911747,
//     ... 1436 more items
//   ]
// ]

